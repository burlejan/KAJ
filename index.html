<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Wordle</title>

    <link rel="stylesheet" href="/css/style.css">
    
</head>
<body>


<header>
    <div class="title">
        <h1>Wordle Game</h1>
    </div>

    <div id="theme_toggle">
        <span id="theme_toggle_span"></span>
    </div>
    <script src="./modules/color_scheme_toggler.js"></script>
</header>

<main>

    </main>

<footer>
    <span class="copyright"><a target="mailto:burlejan@fel.cvut.cz">Jan Burle &copy;2024</a></span>
</footer>

<script>


    // import {page_generator} from "./modules/page_module";
    // import {game_logic} from "./modules/word_module";

    class page_generator {
        constructor() {
            this.main = document.querySelector('main');
            this.currentPlayerName = '';
            this.isGame = false;
            window.onpopstate = this.handlePopState.bind(this); // Listen to popstate event for history navigation
            this.renderWelcomePage();
            this.addKeyUpListener();
        }

        renderWelcomePage() {
            // Set history state for the welcome page
            history.pushState({ page: 'welcome' }, 'Wordle - Welcome', '/');

            this.main.innerHTML = `
            <section class="single">
                <h2>Wordle</h2>
                <label for="player_name">Player name:</label>
                <input type="text" id="player_name" maxlength="5" placeholder="Enter your name">
                <input type="submit" value="Start game" id="submit_player_name">
            </section>`;

            const submitButton = document.querySelector('#submit_player_name');
            const playerNameInput = document.querySelector('#player_name');

            submitButton.addEventListener('click', (e) => {
                e.preventDefault();
                const playerName = playerNameInput.value.trim();
                if (playerName !== '') {
                    this.currentPlayerName = playerName;
                    this.renderGamePage();
                }
            });
        }

        renderGamePage() {
            // Set history state for the game page
            history.pushState({ page: 'game' }, 'Wordle - Game', '/game');

            this.isGame = true;
            this.main.innerHTML = `
            <section class="single" id="board">
            </section>
            <section class="single" id="keyboard">
            </section>`;

            this.renderBoardAndKeyboard();
        }

        renderBoardAndKeyboard() {
            this.renderBoard();
            this.renderKeyboard();
        }

        renderBoard() {
            // Rerender game board with the new word
            if (this.isGame) {
                const gameBoard = document.querySelector('#board');

                gameBoard.innerHTML = '<p>Rerendered board with new word</p>';
            }
        }

        renderKeyboard() {
            if (this.isGame) {
                const keyboard = document.querySelector('#keyboard');

                keyboard.innerHTML = `
                    <div class="keyboard"><div class="Game-keyboard-row"><div tabindex="-1" class="Game-keyboard-button">q</div><div tabindex="-1" class="Game-keyboard-button">w</div><div tabindex="-1" class="Game-keyboard-button">e</div><div tabindex="-1" class="Game-keyboard-button">r</div><div tabindex="-1" class="Game-keyboard-button">t</div><div tabindex="-1" class="Game-keyboard-button">y</div><div tabindex="-1" class="Game-keyboard-button">u</div><div tabindex="-1" class="Game-keyboard-button">i</div><div tabindex="-1" class="Game-keyboard-button">o</div><div tabindex="-1" class="Game-keyboard-button">p</div></div><div class="Game-keyboard-row"><div tabindex="-1" class="Game-keyboard-button">a</div><div tabindex="-1" class="Game-keyboard-button">s</div><div tabindex="-1" class="Game-keyboard-button">d</div><div tabindex="-1" class="Game-keyboard-button">f</div><div tabindex="-1" class="Game-keyboard-button">g</div><div tabindex="-1" class="Game-keyboard-button">h</div><div tabindex="-1" class="Game-keyboard-button">j</div><div tabindex="-1" class="Game-keyboard-button">k</div><div tabindex="-1" class="Game-keyboard-button">l</div></div><div class="Game-keyboard-row"><div tabindex="-1" class="Game-keyboard-button Game-keyboard-button-wide"><svg width="22" height="22"><use xlink:href="/assets/img/spritesvg.svg?v44.15#backspace"></use></svg></div><div tabindex="-1" class="Game-keyboard-button">z</div><div tabindex="-1" class="Game-keyboard-button">x</div><div tabindex="-1" class="Game-keyboard-button">c</div><div tabindex="-1" class="Game-keyboard-button">v</div><div tabindex="-1" class="Game-keyboard-button">b</div><div tabindex="-1" class="Game-keyboard-button">n</div><div tabindex="-1" class="Game-keyboard-button">m</div><div tabindex="-1" class="Game-keyboard-button Game-keyboard-button-wide">Enter</div></div></div>`;

            }
        }

        renderScorePage() {
            // Set history state for the score page
            history.pushState({ page: 'score' }, 'Wordle - Score', '/score');

            this.main.innerHTML = `
            <section class="score">
                <h2>Scores</h2>
                <p>Score 1: 100</p>
                <p>Score 2: 80</p>
                <p>Score 3: 50</p>
            </section>`;
        }

        handlePopState(event) {
            // Handle history navigation
            const state = event.state;
            if (state) {
                if (state.page === 'welcome') {
                    this.renderWelcomePage();
                } else if (state.page === 'game') {
                    this.renderGamePage();
                } else if (state.page === 'score') {
                    this.renderScorePage();
                }
            }
        }


        addKeyUpListener() {
            // todo mozna dokument
            this.main.addEventListener('keyup', e => {

            });
        }
    }


    // const page_generator = new page_generator();
    // const game_logic = new game_logic();

    const page_gen = new page_generator();
    // page_gen.renderWelcomePage();





    // import { checkGuess, getGameState } from './modules/word_module.js';
    //
    // // Example usage in the UI
    // document.getElementById("submitBtn").addEventListener("click", function() {
    //     const guessInput = document.getElementById("guessInput").value;
    //     const result = checkGuess(guessInput);
    //
    //     document.getElementById("resultMessage").textContent = result.message;
    //
    //     if (result.isGameOver) {
    //         // Game over logic (e.g., display the secret word)
    //         const gameState = getGameState();
    //         document.getElementById("wordDisplay").textContent = gameState.guessedWord;
    //         document.getElementById("attemptsLeftDisplay").textContent = "Attempts Left: " + gameState.attemptsLeft;
    //     }
    // });


    // // List of possible words
    // const words = ["apple", "orange", "lemon", "melon", "banana", "grape", "peach", "cherry", "plum", "kiwi"];
    //
    // // Pick a random word from the list
    // let secretWord = words[Math.floor(Math.random() * words.length)];
    // let attemptsLeft = 6;
    // let guessedWord = "_____"; // Display placeholder
    //
    // // Display initial state
    // displayWord();
    //
    // function displayWord() {
    //     document.getElementById("wordDisplay").textContent = guessedWord;
    // }
    //
    // function checkGuess() {
    //     const guess = document.getElementById("guessInput").value.toLowerCase().trim();
    //     document.getElementById("guessInput").value = ""; // Clear input field
    //
    //     if (guess.length !== 5 || !/^[a-z]+$/.test(guess)) {
    //         alert("Please enter a valid 5-letter word.");
    //         return;
    //     }
    //
    //     if (attemptsLeft > 0) {
    //         attemptsLeft--;
    //
    //         // Check if the guessed word matches the secret word
    //         if (guess === secretWord) {
    //             guessedWord = secretWord;
    //             displayWord();
    //             showResultMessage("Congratulations! You guessed the word.");
    //         } else {
    //             // Evaluate the guessed word and update display
    //             let newGuessedWord = "";
    //             for (let i = 0; i < 5; i++) {
    //                 if (secretWord[i] === guess[i]) {
    //                     newGuessedWord += guess[i];
    //                 } else if (secretWord.includes(guess[i])) {
    //                     newGuessedWord += "?";
    //                 } else {
    //                     newGuessedWord += "_";
    //                 }
    //             }
    //             guessedWord = newGuessedWord;
    //             displayWord();
    //
    //             if (attemptsLeft === 0) {
    //                 showResultMessage("Out of attempts! The word was: " + secretWord);
    //             } else {
    //                 showResultMessage("Incorrect guess. Attempts left: " + attemptsLeft);
    //             }
    //         }
    //     }
    // }
    //
    // function showResultMessage(message) {
    //     document.getElementById("resultMessage").textContent = message;
    // }
</script>
</body>
</html>